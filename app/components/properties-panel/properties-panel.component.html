<div id="wrapper">
    <h2>Properties</h2>
    <div *ngIf="isEmpty" id="empty">
        <p>empty</p>
    </div>

    <div *ngIf="!isEmpty">
        <table *ngFor="let name of fieldNames" class="group-table">
            <template [ngIf]="fields[name]">
                <tr><th colspan="2">{{name}}</th></tr>
                <tr *ngFor="let triple of fields[name]">
                    <td class="label">{{triple[1]}}</td>
                    <td [ngSwitch]="triple[2].name">
                        <div *ngSwitchCase="'string'">
                            <input [(ngModel)]="element[triple[0]]" type="text" class="text-input"/>
                        </div>
                        <div *ngSwitchCase="'number'">
                            <input [(ngModel)]="element[triple[0]]" type="number" class="number-input"/>
                        </div>
                        <div *ngSwitchCase="'boolean'">
                            <!-- Needs `ngModelChange` for checkboxes for some reason. Maybe angular will fix? -->
                            <input [ngModel]="element[triple[0]]" (ngModelChange)="element[triple[0]] = $event" type="checkbox"/>
                        </div>
                        <div *ngSwitchDefault> 
                           <label *ngIf="triple[2].isAssignableTo(lookupSinapType('Color')); let did = true" class="color-label" for="property{{triple[0]}}">
                                <span class="color-preview" [style.background-color]="element[triple[0]]"></span>
                                {{element[triple[0]]}}
                                <input [(ngModel)]="element[triple[0]]" id="property{{triple[0]}}" type="color" class="color-input"/>
                            </label>

                        </div>
                    </td>
                </tr>
            </template>
        </table>
    </div>
</div>